function __arr(s){return void 0===s?[]:s instanceof Array?s:[s]}class APOpts{constructor(s=new Promise((()=>{})),e=[]){this.residents=e,this.promise=s}}class ArgsPromise{constructor(s){if(s instanceof APOpts)this._residents=s.residents,this._promise=s.promise;else{if(!(s instanceof Function))throw new Error("The constructor of ArgsPromise expects an executor function as argument.");this._residents=[],this._promise=new Promise(((e,r)=>{s(((...s)=>{e(s)}),((...s)=>{r(s)}),((...s)=>{this._residents=s}))}))}}then(s,e){let r=s?e=>__arr(s(...e,...this._residents)):void 0,t=e?s=>__arr(e(...s,...this._residents)):void 0;return new ArgsPromise(new APOpts(this._promise.then(r,t),this._residents))}catch(s){let e=s?e=>__arr(s(...e,...this._residents)):void 0;return new ArgsPromise(new APOpts(this._promise.catch(e),this._residents))}finally(s){let e=s?()=>__arr(s(...this._residents)):void 0;return new ArgsPromise(new APOpts(this._promise.finally(e),this._residents))}pack(){return new ArgsPromise((s=>{this._promise.then((e=>{s([...e,...this._residents])}))}))}to(){return new ArgsPromise((s=>{this._promise.then((e=>{s([null,[...e,...this._residents]])})).catch((e=>{s([[...e,...this._residents],void 0])}))}))}}export default ArgsPromise;export{ArgsPromise,APOpts};